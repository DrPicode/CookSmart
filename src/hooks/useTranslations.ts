import { useCallback, useMemo } from 'react';

const TRANSLATIONS: Record<'fr' | 'en', Record<string, string>> = {
    fr: {
        appTitle: 'CookSmart',
        appSubtitle: 'GÃ©rez courses, recettes et dates de pÃ©remption',
        tabCourses: 'Liste', tabRecettes: 'Recettes', tabGestion: 'Gestion', tabHistorique: 'Hist.',
        resetData: 'RÃ©initialiser', confirmReset: 'Effacer TOUTES les donnÃ©es ? (ingrÃ©dients, catÃ©gories, recettes, historique)',
        langToggle: 'Langue',
        startShopping: 'DÃ©marrer les courses',
        articles: 'articles',
        tip: 'Astuce', tipCheckbox: 'Astuce : Cochez les ingrÃ©dients que vous avez Ã  la maison.',
        toBuy: 'Ã€ acheter',
        shoppingListTitle: 'Liste des courses',
        close: 'Fermer',
        progressSelected: 'SÃ©lectionnÃ©s',
        progressSubtotal: 'Sous-total',
        finish: 'Terminer',
        cancel: 'Annuler',
        totalEstimate: 'Total estimÃ© :',
        allInStock: 'Tout est en stock ! ðŸŽ‰',
        recipesNone: 'Aucune recette possible avec les ingrÃ©dients actuels.',
        canCookIntro: 'ðŸŽ‰ Super !', canCookMiddle: 'Vous pouvez prÃ©parer', dish: 'plat', dishes: 'plats',
        consumeSoon: 'Ã€ consommer rapidement',
        suggestedRecipes: 'Recettes suggÃ©rÃ©es en prioritÃ© :',
        manageIngredients: 'Gestion des IngrÃ©dients',
        add: 'Ajouter', addIngredient: 'Ajouter ingrÃ©dient', addRecipe: 'Ajouter recette', save: 'Enregistrer', saveVerb: 'Sauvegarder',
        invalidCategoryName: 'Nom de catÃ©gorie invalide', categoryExists: 'Une catÃ©gorie avec ce nom existe dÃ©jÃ .',
        rename: 'Renommer',
        saveAction: 'Sauver',
        importExportInfo: 'Sauvegardez ou restaurez toutes vos donnÃ©es (ingrÃ©dients, catÃ©gories, recettes, historique). Format JSON versionnÃ©.',
        exportError: 'Erreur lors de l\'export des donnÃ©es.',
        invalidFilePrefix: 'Fichier invalide:',
        importAdjustmentsPrefix: 'Import avec ajustements:',
        importConfirm: 'Importer ce fichier et remplacer les donnÃ©es actuelles ?',
        readFail: 'Lecture ou parsing JSON Ã©chouÃ©.',
        cannotReadFile: 'Impossible de lire le fichier.',
        ingredientsLabel: 'IngrÃ©dients :',
        manageRecipes: 'Gestion des Recettes',
        importExport: 'Import / Export', export: 'Exporter', import: 'Importer',
        historyIntro: 'Historique de vos sessions de courses.',
    manage: 'Modifier', done: 'Terminer',
        selectAll: 'Tout sÃ©lectionner', deselectAll: 'Tout dÃ©sÃ©lectionner', deleteSelected: 'Supprimer sÃ©lection',
        emptyHistory: 'Aucune session enregistrÃ©e pour l\'instant.',
        clearHistory: 'Vider l\'historique', clearHistoryConfirm: 'Effacer tout l\'historique des courses ?',
        deleteSessionConfirmOne: 'Supprimer cette session ?', deleteSessionConfirmMany: 'Supprimer {n} sessions ?',
        deleteRecipeConfirm: 'Supprimer cette recette ?', deleteIngredientConfirm: 'Supprimer "{name}" ?',
        priceMust: 'Le prix doit Ãªtre â‰¥ 0 et les parts â‰¥ 1. La date de pÃ©remption est optionnelle.',
        nameUsed: 'Nom dÃ©jÃ  utilisÃ©.',
        ingredientFormName: 'Nom de l\'ingrÃ©dient', chooseCategory: 'Choisir une catÃ©gorie', price: 'Prix', parts: 'Parts', expiryOptional: 'Date de pÃ©remption (optionnelle)',
        dateExpiry: 'DLC', perPart: 'â‚¬/part', expired: 'PÃ‰RIMÃ‰', expiresPrefix: 'Expire', suggestedIngredients: 'IngrÃ©dients :',
        daysLeft: 'jours restants',
        help: 'Aide', tutorialTitle: 'Guide rapide', tutorialIntro: 'Voici les Ã©tapes pour utiliser l\'application au mieux :', tutorialGotIt: 'J\'ai compris', tutorialBackToTop: 'Retour en haut', tutorialFooterNote: 'Astuce : les donnÃ©es sont sauvegardÃ©es automatiquement dans votre navigateur.',
        tutorialStartWithDemo: 'Commencer avec les donnÃ©es dÃ©mo', tutorialStartEmpty: 'Commencer avec aucune donnÃ©e',
        freshToggleLabel: 'CatÃ©gorie fraÃ®che (suivi date pÃ©remption)', freshSectionTitle: 'CatÃ©gories fraÃ®ches',
        installPWA: 'Installer l\'app', installPWATitle: 'ðŸ“± Installer l\'application', installPWADescription: 'Installez CookSmart sur votre tÃ©lÃ©phone pour un accÃ¨s rapide et une utilisation hors ligne !', installPWAButton: 'Installer maintenant', installPWALater: 'Peut-Ãªtre plus tard', installPWAAlreadyInstalled: 'âœ“ DÃ©jÃ  installÃ©e',
        searchPlaceholder: 'Rechercher...', searchIngredients: 'Rechercher un ingrÃ©dient', searchRecipes: 'Rechercher une recette',
        notificationTitle: 'ðŸ”” Notifications', notificationDescription: 'Recevez des alertes pour les produits qui pÃ©riment bientÃ´t', notificationEnable: 'Activer', notificationDisable: 'DÃ©sactiver', notificationEnabled: 'âœ“ ActivÃ©es', notificationDenied: 'RefusÃ©es'
    , notifEnabled: 'Notifications activÃ©es', notifDisabled: 'Activer notifications', notifDenied: 'Notifications refusÃ©es', notifRequest: 'Demander autorisation'
    },
    en: {
        appTitle: 'CookSmart',
        appSubtitle: 'Manage groceries, recipes & expiry dates',
        tabCourses: 'List', tabRecettes: 'Recipes', tabGestion: 'Manage', tabHistorique: 'Hist.',
        resetData: 'Reset', confirmReset: 'Delete ALL data? (ingredients, categories, recipes, history)',
        langToggle: 'Language',
        startShopping: 'Start shopping',
        articles: 'items',
        tip: 'Tip', tipCheckbox: 'Tip: Check ingredients you already have.',
        toBuy: 'To buy',
        shoppingListTitle: 'Shopping list',
        close: 'Close',
        progressSelected: 'Selected',
        progressSubtotal: 'Subtotal',
        finish: 'Finish',
        cancel: 'Cancel',
        totalEstimate: 'Estimated total:',
        allInStock: 'Everything is in stock! ðŸŽ‰',
        recipesNone: 'No recipe possible with current ingredients.',
        canCookIntro: 'ðŸŽ‰ Great!', canCookMiddle: 'You can prepare', dish: 'dish', dishes: 'dishes',
        consumeSoon: 'Consume soon',
        suggestedRecipes: 'Suggested priority recipes:',
        manageIngredients: 'Ingredients Management',
        add: 'Add', addIngredient: 'Add ingredient', addRecipe: 'Add recipe', save: 'Save', saveVerb: 'Save',
        invalidCategoryName: 'Invalid category name', categoryExists: 'A category with that name already exists.',
        rename: 'Rename',
        saveAction: 'Save',
        importExportInfo: 'Save or restore all your data (ingredients, categories, recipes, history). Versioned JSON format.',
        exportError: 'Error while exporting data.',
        invalidFilePrefix: 'Invalid file:',
        importAdjustmentsPrefix: 'Import with adjustments:',
        importConfirm: 'Import this file and replace current data?',
        readFail: 'Reading or JSON parsing failed.',
        cannotReadFile: 'Cannot read file.',
        ingredientsLabel: 'Ingredients:',
        manageRecipes: 'Recipes Management',
        importExport: 'Import / Export', export: 'Export', import: 'Import',
        historyIntro: 'History of your shopping sessions.',
        manage: 'Manage', done: 'Done',
        selectAll: 'Select all', deselectAll: 'Unselect all', deleteSelected: 'Delete selected',
        emptyHistory: 'No session recorded yet.',
        clearHistory: 'Clear history', clearHistoryConfirm: 'Clear all shopping history?',
        deleteSessionConfirmOne: 'Delete this session?', deleteSessionConfirmMany: 'Delete {n} sessions?',
        deleteRecipeConfirm: 'Delete this recipe?', deleteIngredientConfirm: 'Delete "{name}"?',
        priceMust: 'Price must be â‰¥ 0 and parts â‰¥ 1. Expiry date is optional.',
        nameUsed: 'Name already used.',
        ingredientFormName: 'Ingredient name', chooseCategory: 'Choose a category', price: 'Price', parts: 'Parts', expiryOptional: 'Expiry date (optional)',
        dateExpiry: 'Expiry date', perPart: 'â‚¬/part', expired: 'EXPIRED', expiresPrefix: 'Expires', suggestedIngredients: 'Ingredients:',
        daysLeft: 'days left',
        help: 'Help', tutorialTitle: 'Quick tutorial', tutorialIntro: 'Follow these steps to get the best out of the app:', tutorialGotIt: 'Got it', tutorialBackToTop: 'Back to top', tutorialFooterNote: 'Tip: data is saved automatically in your browser.',
        tutorialStartWithDemo: 'Start with demo data', tutorialStartEmpty: 'Start with no data',
        freshToggleLabel: 'Fresh category (expiry tracking)', freshSectionTitle: 'Fresh categories',
        installPWA: 'Install app', installPWATitle: 'ðŸ“± Install the app', installPWADescription: 'Install CookSmart on your phone for quick access and offline use!', installPWAButton: 'Install now', installPWALater: 'Maybe later', installPWAAlreadyInstalled: 'âœ“ Already installed',
        searchPlaceholder: 'Search...', searchIngredients: 'Search for an ingredient', searchRecipes: 'Search for a recipe',
        notificationTitle: 'ðŸ”” Notifications', notificationDescription: 'Receive alerts for products expiring soon', notificationEnable: 'Enable', notificationDisable: 'Disable', notificationEnabled: 'âœ“ Enabled', notificationDenied: 'Denied'
    , notifEnabled: 'Notifications enabled', notifDisabled: 'Enable notifications', notifDenied: 'Notifications denied', notifRequest: 'Request permission'
    }
};

export function useTranslations(lang: 'fr' | 'en') {
    const dict = useMemo(() => TRANSLATIONS[lang], [lang]);
    const t = useCallback((key: string) => dict[key] || key, [dict]);
    return { t, lang, translations: dict };
}

export type TranslationKey = keyof typeof TRANSLATIONS['fr'];
